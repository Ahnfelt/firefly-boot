{
    "version": 3,
    "sources": [
        "../../../../../core/Atomic.ff"
    ],
    "sourcesContent": [
        "class Atomic[T] {}\r\n\r\nnew[T](value: T): Atomic[T] {\r\n    Js->(value = value!)?\r\n}\r\n\r\nextend self[T]: Atomic[T] {\r\n\r\n    modify(body: T => T): T {\r\n        if(Js.inAsync()) {\r\n            mutable currentValue = self!->value\r\n            mutable newValue = body(self!->value?)\r\n            while {currentValue !== self!->value} {\r\n                currentValue = self!->value\r\n                newValue = body(self!->value?)\r\n            }\r\n            self!->value = newValue!\r\n            newValue\r\n        } else {\r\n            let newValue = body(self!->value?)\r\n            self!->value = newValue!\r\n            newValue\r\n        }\r\n    }\r\n\r\n    getAndModify(body: T => T): T {\r\n        mutable currentValue = self!->value\r\n        if(Js.inAsync()) {\r\n            mutable newValue = body(self!->value?)\r\n            while {currentValue !== self!->value} {\r\n                currentValue = self!->value\r\n                newValue = body(self!->value?)\r\n            }\r\n            self!->value = newValue!\r\n            currentValue?\r\n        } else {\r\n            let newValue = body(self!->value?)\r\n            self!->value = newValue!\r\n            currentValue?\r\n        }\r\n    }\r\n\r\n    get(): T {\r\n        self!->value?\r\n    }\r\n\r\n    set(value: T): Unit {\r\n        self!->value = value!\r\n    }\r\n\r\n    getAndSet(newValue: T): T {\r\n        let currentValue = self!->value\r\n        self!->value = newValue!\r\n        currentValue?\r\n    }\r\n\r\n    compareAndSet(currentValue: T, newValue: T): Bool {\r\n        if(self!->value !== currentValue!) {False} else:\r\n        self!->value = newValue!\r\n        True\r\n    }\r\n\r\n}\r\n"
    ],
    "names": [
        "new",
        "value",
        "modify",
        "self",
        "body",
        "currentValue",
        "newValue",
        "getAndModify",
        "get",
        "set",
        "getAndSet",
        "compareAndSet"
    ],
    "mappings": "A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;A;;AAAM;;;A,OAEN,SAAAA,IAAA,CAAOC,MAAP,CAAA;AACwB,OAApB,CAAK,AAAAA,KAAL,EAAaA,MAAb;AADJ;;A,OAAA,eAAAD,KAAA,CAAOC,M,EAAP,KAAA,CAAA;AACwB,OAApB,CAAK,AAAAA,KAAL,EAAaA,MAAb;AADJ;;AAIO,OAEH,SAAAC,aAAA,CAFGC,K,EAEIC,KAAP,CAAA;AACU,GAAA,KAAA;AACM,IAAAC,aAAA,GAAeF,KAAO,CAAAF,KAAtB;AACA,IAAAK,SAAA,GAAWF,KAAA,CAAKD,KAAO,CAAAF,KAAZ,CAAX;AACR,KAAA,CAAoB,CAAbI,aAAa,KAAIF,KAAO,CAAAF,KAAX,CAApB;AACII,aAAA,GAAeF,KAAO,CAAAF,KACtC;AAAgBK,SAAA,GAAWF,KAAA,CAAKD,KAAO,CAAAF,KAAZ;AAFf,CAIZ;AAAYE,KAAO,CAAAF,KAAH,GAAWK,SAC3B;AAAY,OAAAA;AARE,OASJ;AACM,MAAAA,SAAA,GAAWF,KAAA,CAAKD,KAAO,CAAAF,KAAZ,CAAX;AACJE,KAAO,CAAAF,KAAH,GAAWK,SAC3B;AAAY,OAAAA;AAHF;AAVN;;AAFG,OAmBH,SAAAC,mBAAA,CAnBGJ,K,EAmBUC,KAAb,CAAA;AACY,IAAAC,aAAA,GAAeF,KAAO,CAAAF,KAAtB;AACF,GAAA,KAAA;AACM,IAAAK,SAAA,GAAWF,KAAA,CAAKD,KAAO,CAAAF,KAAZ,CAAX;AACR,KAAA,CAAoB,CAAbI,aAAa,KAAIF,KAAO,CAAAF,KAAX,CAApB;AACII,aAAA,GAAeF,KAAO,CAAAF,KACtC;AAAgBK,SAAA,GAAWF,KAAA,CAAKD,KAAO,CAAAF,KAAZ;AAFf,CAIZ;AAAYE,KAAO,CAAAF,KAAH,GAAWK,SAC3B;AAAwB,OAAZD;AAPE,OAQJ;AACM,MAAAC,SAAA,GAAWF,KAAA,CAAKD,KAAO,CAAAF,KAAZ,CAAX;AACJE,KAAO,CAAAF,KAAH,GAAWK,SAC3B;AAAwB,OAAZD;AAHF;AAVN;;AAnBG,OAoCH,SAAAG,UAAA,CApCGL,KAoCH,CAAA;AACgB,OAAZA,KAAO,CAAAF;AADX;;AApCG,OAwCH,SAAAQ,UAAA,CAxCGN,K,EAwCCF,MAAJ,CAAA;AACIE,KAAO,CAAAF,KAAH,GAAWA;AADnB;;AAxCG,OA4CH,SAAAS,gBAAA,CA5CGP,K,EA4COG,SAAV,CAAA;AACQ,MAAAD,aAAA,GAAeF,KAAO,CAAAF,KAAtB;AACJE,KAAO,CAAAF,KAAH,GAAWK,SACvB;AAAoB,OAAZD;AAHJ;;AA5CG,OAkDH,SAAAM,oBAAA,CAlDGR,K,EAkDWE,a,EAAiBC,SAA/B,CAAA;AACoB,GAAA,CAAbH,KAAO,CAAAF,KAAM,KAAII,aAAJ,CAAA;AAAoB,OAAA;AAApB,OAA2B;AAC3CF,KAAO,CAAAF,KAAH,GAAWK,SACvB;AAAQ,OAAA;AAF2C;AAD/C;;AAlDG,OAEH,eAAAJ,cAAA,CAFGC,K,EAEIC,K,EAAP,KAAA,CAAA;AACU,GAAA,IAAA;AACM,IAAAC,aAAA,GAAeF,KAAO,CAAAF,KAAtB;AACA,IAAAK,SAAA,GAAW,OAAAF,KAAA,CAAKD,KAAO,CAAAF,K,EAAZ,KAAA,CAAA,CAAX;AACR,KAAA,CAAoB,CAAbI,aAAa,KAAIF,KAAO,CAAAF,KAAX,CAApB;AACII,aAAA,GAAeF,KAAO,CAAAF,KACtC;AAAgBK,SAAA,GAAW,OAAAF,KAAA,CAAKD,KAAO,CAAAF,K,EAAZ,KAAA,CAAA;AAFf,CAIZ;AAAYE,KAAO,CAAAF,KAAH,GAAWK,SAC3B;AAAY,OAAAA;AARE,OASJ;AACM,MAAAA,SAAA,GAAW,OAAAF,KAAA,CAAKD,KAAO,CAAAF,K,EAAZ,KAAA,CAAA,CAAX;AACJE,KAAO,CAAAF,KAAH,GAAWK,SAC3B;AAAY,OAAAA;AAHF;AAVN;;AAFG,OAmBH,eAAAC,oBAAA,CAnBGJ,K,EAmBUC,K,EAAb,KAAA,CAAA;AACY,IAAAC,aAAA,GAAeF,KAAO,CAAAF,KAAtB;AACF,GAAA,IAAA;AACM,IAAAK,SAAA,GAAW,OAAAF,KAAA,CAAKD,KAAO,CAAAF,K,EAAZ,KAAA,CAAA,CAAX;AACR,KAAA,CAAoB,CAAbI,aAAa,KAAIF,KAAO,CAAAF,KAAX,CAApB;AACII,aAAA,GAAeF,KAAO,CAAAF,KACtC;AAAgBK,SAAA,GAAW,OAAAF,KAAA,CAAKD,KAAO,CAAAF,K,EAAZ,KAAA,CAAA;AAFf,CAIZ;AAAYE,KAAO,CAAAF,KAAH,GAAWK,SAC3B;AAAwB,OAAZD;AAPE,OAQJ;AACM,MAAAC,SAAA,GAAW,OAAAF,KAAA,CAAKD,KAAO,CAAAF,K,EAAZ,KAAA,CAAA,CAAX;AACJE,KAAO,CAAAF,KAAH,GAAWK,SAC3B;AAAwB,OAAZD;AAHF;AAVN;;AAnBG,OAoCH,eAAAG,WAAA,CApCGL,K,EAoCH,KAAA,CAAA;AACgB,OAAZA,KAAO,CAAAF;AADX;;AApCG,OAwCH,eAAAQ,WAAA,CAxCGN,K,EAwCCF,M,EAAJ,KAAA,CAAA;AACIE,KAAO,CAAAF,KAAH,GAAWA;AADnB;;AAxCG,OA4CH,eAAAS,iBAAA,CA5CGP,K,EA4COG,S,EAAV,KAAA,CAAA;AACQ,MAAAD,aAAA,GAAeF,KAAO,CAAAF,KAAtB;AACJE,KAAO,CAAAF,KAAH,GAAWK,SACvB;AAAoB,OAAZD;AAHJ;;AA5CG,OAkDH,eAAAM,qBAAA,CAlDGR,K,EAkDWE,a,EAAiBC,S,EAA/B,KAAA,CAAA;AACoB,GAAA,CAAbH,KAAO,CAAAF,KAAM,KAAII,aAAJ,CAAA;AAAoB,OAAA;AAApB,OAA2B;AAC3CF,KAAO,CAAAF,KAAH,GAAWK,SACvB;AAAQ,OAAA;AAF2C;AAD/C"
}