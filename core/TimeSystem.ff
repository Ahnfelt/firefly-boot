type TimeSystem {}

extend self: TimeSystem {

    now(): Instant
        target js sync "return Date.now() * 0.001"

    elapsed(): Duration
        target js sync "return performance.now() * 0.001"

    measure[R](body: () => R): Pair[R, Duration] {
        let start = self.elapsed()
        let result = body()
        let stop = self.elapsed()
        let duration = Duration(stop.seconds - start.seconds)
        Pair(result, duration)
    }

}
